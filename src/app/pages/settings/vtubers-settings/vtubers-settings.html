<div class="mat-text-caption mat-secondary-text mb-4">
  Selected {{ selectedCount() }} out of {{ total() }}
</div>

<mat-tree class="pb-4" [dataSource]="dataSource" [treeControl]="treeControl">
  <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
    <button mat-icon-button disabled></button>
    <mat-checkbox
      color="primary"
      [checked]="isChecked(node)"
      (change)="toggle(node, $event.checked)"
    >
      <img
        height="24"
        width="24"
        class="rounded-full select-none mr-1 align-bottom"
        [attr.alt]="node.label"
        [src]="node.id | avatar"
      />
      {{ node.label }}
    </mat-checkbox>
  </mat-tree-node>

  <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
    <button mat-icon-button matTreeNodeToggle>
      <mat-icon
        class="transition-all"
        [class.rotate-90]="treeControl.isExpanded(node)"
        svgIcon="chevron_right"
      />
    </button>

    <mat-checkbox
      color="primary"
      [checked]="isChecked(node)"
      [indeterminate]="isPartiallyChecked(node)"
      (change)="toggle(node, $event.checked)"
    >
      {{ node.label }}
    </mat-checkbox>
  </mat-tree-node>
</mat-tree>
